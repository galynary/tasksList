{"mappings":"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","sources":["src/js/index.js"],"sourcesContent":["const list = document.querySelector('.task__list');\nconst createBtnTask = document.querySelector('.btn__task-create');\n\nlet tasks = JSON.parse(localStorage.getItem('tasks')) || [];\ncreateBtnTask.addEventListener('click', createTask);\n\n// Render existing tasks from localStorage\ntasks.forEach(renderTask);\n\nfunction createTask() {\n  let task = {\n    id: tasks.length + 1,\n    name: '',\n    time: '',\n    timeLeft: '',\n  };\n  let lastTask = tasks[tasks.length - 1];\n  if (tasks.length && lastTask.name.trim() === '') {\n    alert('Спочатку введіть своє завдання!!!');\n  } else {\n    tasks.push(task);\n    localStorage.setItem('tasks', JSON.stringify(tasks));\n    renderTask(task);\n  }\n}\n\nfunction renderTask(task) {\n  let taskElem = document.createElement('li');\n  taskElem.classList.add('task__item');\n  taskElem.dataset.id = task.id;\n  taskElem.innerHTML = `\n  <div class=\"task__text\">\n    <textarea class=\"task__text-name\" placeholder=\"Введіть завдання\">${\n      task.name\n    }</textarea>\n  </div>\n  <div class=\"task\">\n    <div class=\"task__time-inner\">\n      <div class=\"task__time\">\n        <input\n          type=\"datetime-local\"\n          name=\"datime\"\n          min=\"2024-06-30T00:00\"\n          max=\"2035-06-30T00:00\"\n          value=\"${task.time}\" class=\"task__text-input\"\n        />\n        <label for=\"task__text\" class=\"task__label\">Введіть дату виконання</label>\n      </div>\n      <div class=\"task__time-left\">\n        <span class=\"countdown\">${task.timeLeft || ''}</span>\n        <label for=\"task__text\" class=\"time-left__label\"> до завершення залишилося</label>\n      </div>\n    </div>\n    <div class=\"task__buttons\">\n      <button type=\"button\" class=\"task__save button\">Зберегти</button>\n      <button type=\"button\" class=\"task__delete button\">Видалити</button>\n    </div>\n  </div>`;\n\n  list.append(taskElem);\n\n  let btnSave = taskElem.querySelector('.task__save');\n  btnSave.addEventListener('click', () => saveTask(taskElem));\n\n  let btnDelete = taskElem.querySelector('.task__delete');\n  btnDelete.addEventListener('click', deleteTask);\n\n  let inputDateTime = taskElem.querySelector('.task__time input');\n  inputDateTime.addEventListener('input', event => {\n    let taskId = parseInt(taskElem.dataset.id);\n    let task = tasks.find(task => task.id === taskId);\n    if (task) {\n      task.time = inputDateTime.value;\n      localStorage.setItem('tasks', JSON.stringify(tasks));\n      startCountdown(taskElem, task.time, task);\n    }\n  });\n\n  // Start countdown if there's time set\n  if (task.time) {\n    startCountdown(taskElem, task.time, task);\n  }\n}\n\nfunction saveTask(taskElem) {\n  let textTask = taskElem.querySelector('.task__text-name');\n  let taskText = textTask.value;\n  if (taskText === '') {\n    alert('Спочатку введіть своє завдання!!!');\n    return;\n  }\n\n  let taskId = parseInt(taskElem.dataset.id);\n  let task = tasks.find(task => task.id === taskId);\n\n  if (task) {\n    task.name = taskText;\n    localStorage.setItem('tasks', JSON.stringify(tasks));\n  }\n  // startCountdown();\n}\n\nfunction deleteTask(event) {\n  let taskElem = event.target.closest('li');\n  let taskId = parseInt(taskElem.dataset.id);\n  let taskIndex = tasks.findIndex(task => task.id === taskId);\n\n  if (taskIndex !== -1) {\n    tasks.splice(taskIndex, 1);\n    list.removeChild(taskElem);\n    localStorage.setItem('tasks', JSON.stringify(tasks));\n    updateTaskIds();\n    localStorage.setItem('tasks', JSON.stringify(tasks));\n  }\n}\n\nfunction updateTaskIds() {\n  tasks.forEach((task, index) => {\n    task.id = index + 1;\n    let taskElem = list.querySelector(`[data-id=\"${index + 1}\"]`);\n    if (taskElem) {\n      taskElem.dataset.id = task.id;\n    }\n  });\n}\n\nconst startCountdown = (rowElement, endTime, task) => {\n  const countdownElement = rowElement.querySelector('.countdown');\n  const timeLabel = document.querySelector('.time-left__label');\n  const updateCountdown = () => {\n    const now = new Date().getTime();\n    const end = new Date(endTime).getTime();\n    const distance = end - now;\n\n    if (distance > 0) {\n      timeLabel.style.display = 'block';\n      const days = Math.floor(distance / (1000 * 60 * 60 * 24));\n      const hours = Math.floor(\n        (distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)\n      );\n      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));\n      const seconds = Math.floor((distance % (1000 * 60)) / 1000);\n\n      const timeLeft = `${days}д ${hours}г ${minutes}хв ${seconds}сек`;\n      countdownElement.textContent = timeLeft;\n      task.timeLeft = timeLeft;\n      localStorage.setItem('tasks', JSON.stringify(tasks));\n    } else {\n      clearInterval(timerInterval);\n      countdownElement.textContent = 'Термін вичерпано';\n      task.timeLeft = 'Термін вичерпано';\n      localStorage.setItem('tasks', JSON.stringify(tasks));\n    }\n  };\n\n  updateCountdown();\n  const timerInterval = setInterval(updateCountdown, 1000);\n};\n"],"names":["$85a5f86b715fe7db$var$list","document","querySelector","$85a5f86b715fe7db$var$createBtnTask","$85a5f86b715fe7db$var$tasks","JSON","parse","localStorage","getItem","$85a5f86b715fe7db$var$renderTask","task1","taskElem","createElement","classList","add","dataset","id","innerHTML","time","timeLeft","append","addEventListener","taskText","value","alert","taskId","parseInt","task3","find","task","name","setItem","stringify","$85a5f86b715fe7db$var$saveTask","$85a5f86b715fe7db$var$deleteTask","inputDateTime","event","task2","$85a5f86b715fe7db$var$startCountdown","target","closest","taskIndex","findIndex","splice","removeChild","forEach","index","length","lastTask","trim","push","rowElement","endTime","countdownElement","timeLabel","updateCountdown","now","Date","getTime","distance","style","display","Math","floor","textContent","clearInterval","timerInterval","setInterval"],"version":3,"file":"index.5bc101f8.js.map"}