{"mappings":"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","sources":["src/js/index.js"],"sourcesContent":["const list = document.querySelector('.task__list');\nconst createBtnTask = document.querySelector('.btn__task-create');\n\nlet tasks = JSON.parse(localStorage.getItem('tasks')) || [];\ncreateBtnTask.addEventListener('click', createTask);\n\n// Render existing tasks from localStorage\ntasks.forEach(renderTask);\n\nfunction createTask() {\n  let task = {\n    id: tasks.length + 1,\n    name: '',\n    time: '',\n    timeLeft: '',\n  };\n  let lastTask = tasks[tasks.length - 1];\n  if (tasks.length && lastTask.name.trim() === '') {\n    alert('Спочатку введіть своє завдання!!!');\n  } else {\n    tasks.push(task);\n    localStorage.setItem('tasks', JSON.stringify(tasks));\n    renderTask(task);\n  }\n}\n\nfunction renderTask(task) {\n  let taskElem = document.createElement('li');\n  taskElem.classList.add('task__item');\n  taskElem.dataset.id = task.id;\n  taskElem.innerHTML = `\n  <div class=\"task__text\">\n    <textarea class=\"task__text-name\" placeholder=\"Введіть завдання\">${\n      task.name\n    }</textarea>\n  </div>\n  <div class=\"task\">\n    <div class=\"task__time-inner\">\n      <div class=\"task__time\">\n        <input\n          type=\"datetime-local\"\n          name=\"datime\"\n          min=\"2024-06-30T00:00\"\n          max=\"2035-06-30T00:00\"\n          value=\"${task.time}\" class=\"task__text-input\"\n        />\n        <label for=\"task__text\" class=\"task__label\">Введіть дату виконання</label>\n      </div>\n      <div class=\"task__time-left\">\n        <span class=\"countdown\">${task.timeLeft || ''}</span>\n        <label for=\"task__text\" class=\"time-left__label\"> до завершення залишилося</label>\n      </div>\n    </div>\n    <div class=\"task__buttons\">\n      <button type=\"button\" class=\"task__save button\">Зберегти</button>\n      <button type=\"button\" class=\"task__delete button\">Видалити</button>\n    </div>\n  </div>`;\n\n  list.append(taskElem);\n\n  let btnSave = taskElem.querySelector('.task__save');\n  btnSave.addEventListener('click', () => saveTask(taskElem));\n\n  let btnDelete = taskElem.querySelector('.task__delete');\n  btnDelete.addEventListener('click', deleteTask);\n\n  let inputDateTime = taskElem.querySelector('.task__time input');\n  inputDateTime.addEventListener('input', event => {\n    let taskId = parseInt(taskElem.dataset.id);\n    let task = tasks.find(task => task.id === taskId);\n    if (task) {\n      task.time = inputDateTime.value;\n      localStorage.setItem('tasks', JSON.stringify(tasks));\n      startCountdown(taskElem, task.time, task);\n    }\n  });\n\n  // Start countdown if there's time set\n  if (task.time) {\n    startCountdown(taskElem, task.time, task);\n  }\n}\n\nfunction saveTask(taskElem) {\n  let textTask = taskElem.querySelector('.task__text-name');\n  let taskText = textTask.value;\n  if (taskText === '') {\n    alert('Спочатку введіть своє завдання!!!');\n    return;\n  }\n\n  let taskId = parseInt(taskElem.dataset.id);\n  let task = tasks.find(task => task.id === taskId);\n\n  if (task) {\n    task.name = taskText;\n    localStorage.setItem('tasks', JSON.stringify(tasks));\n  }\n  // startCountdown();\n}\n\nfunction deleteTask(event) {\n  let taskElem = event.target.closest('li');\n  let taskId = parseInt(taskElem.dataset.id);\n  let taskIndex = tasks.findIndex(task => task.id === taskId);\n\n  if (taskIndex !== -1) {\n    tasks.splice(taskIndex, 1);\n    list.removeChild(taskElem);\n    localStorage.setItem('tasks', JSON.stringify(tasks));\n    updateTaskIds();\n    localStorage.setItem('tasks', JSON.stringify(tasks));\n  }\n}\n\nfunction updateTaskIds() {\n  tasks.forEach((task, index) => {\n    task.id = index + 1;\n    let taskElem = list.querySelector(`[data-id=\"${index + 1}\"]`);\n    if (taskElem) {\n      taskElem.dataset.id = task.id;\n    }\n  });\n}\n\nconst startCountdown = (rowElement, endTime, task) => {\n  const countdownElement = rowElement.querySelector('.countdown');\n  const timeLabel = document.querySelector('.time-left__label');\n  const updateCountdown = () => {\n    const now = new Date().getTime();\n    const end = new Date(endTime).getTime();\n    const distance = end - now;\n\n    if (distance > 0) {\n      timeLabel.style.display = 'block';\n      const days = Math.floor(distance / (1000 * 60 * 60 * 24));\n      const hours = Math.floor(\n        (distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)\n      );\n      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));\n      const seconds = Math.floor((distance % (1000 * 60)) / 1000);\n\n      const timeLeft = `${days}д ${hours}г ${minutes}хв ${seconds}сек`;\n      countdownElement.textContent = timeLeft;\n      task.timeLeft = timeLeft;\n      localStorage.setItem('tasks', JSON.stringify(tasks));\n    } else {\n      clearInterval(timerInterval);\n      countdownElement.textContent = 'Термін вичерпано';\n      task.timeLeft = 'Термін вичерпано';\n      localStorage.setItem('tasks', JSON.stringify(tasks));\n    }\n  };\n\n  updateCountdown();\n  const timerInterval = setInterval(updateCountdown, 1000);\n};\n"],"names":["$44ae6d9db4eaca0f$var$list","document","querySelector","$44ae6d9db4eaca0f$var$createBtnTask","$44ae6d9db4eaca0f$var$tasks","JSON","parse","localStorage","getItem","$44ae6d9db4eaca0f$var$renderTask","task1","taskElem","createElement","classList","add","dataset","id","innerHTML","concat","name","time","timeLeft","append","addEventListener","taskText","value","alert","taskId","parseInt","task2","find","task","setItem","stringify","$44ae6d9db4eaca0f$var$saveTask","$44ae6d9db4eaca0f$var$deleteTask","inputDateTime","event","_$task","$44ae6d9db4eaca0f$var$startCountdown","target","closest","taskIndex","findIndex","splice","removeChild","forEach","index","length","lastTask","trim","push","rowElement","endTime","countdownElement","timeLabel","updateCountdown","now","Date","getTime","distance","style","display","days","Math","floor","hours","minutes","seconds","textContent","clearInterval","timerInterval","setInterval"],"version":3,"file":"index.a68d66e7.js.map"}